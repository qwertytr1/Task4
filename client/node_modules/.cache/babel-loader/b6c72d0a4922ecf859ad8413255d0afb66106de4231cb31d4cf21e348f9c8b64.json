{"ast":null,"code":"var _jsxFileName = \"/Users/mahnach04icloud.com/Desktop/\\u041D\\u043E\\u0432\\u0430\\u044F \\u043F\\u0430\\u043F\\u043A\\u0430/front-end/src/components/AuthProvider/ProtectRoute.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectRoute = ({\n  children\n}) => {\n  _s();\n  const [loading, setLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  useEffect(() => {\n    const token = localStorage.getItem('authToken');\n    if (token) {\n      // Optionally, validate the token with the server\n      fetch('http://localhost:8081/validateToken', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      }).then(response => {\n        if (response.ok) {\n          setIsAuthenticated(true);\n        } else {\n          localStorage.removeItem('authToken');\n          setIsAuthenticated(false);\n        }\n      }).catch(() => {\n        localStorage.removeItem('authToken');\n        setIsAuthenticated(false);\n      }).finally(() => setLoading(false));\n    } else {\n      setLoading(false);\n    }\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }, this); // Show a loading indicator\n  }\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n_s(ProtectRoute, \"U0jpAbumld2ipkGHc9rV+Tl49NY=\");\n_c = ProtectRoute;\nexport default ProtectRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectRoute\");","map":{"version":3,"names":["React","useEffect","useState","Navigate","jsxDEV","_jsxDEV","ProtectRoute","children","_s","loading","setLoading","isAuthenticated","setIsAuthenticated","token","localStorage","getItem","fetch","method","headers","Authorization","then","response","ok","removeItem","catch","finally","fileName","_jsxFileName","lineNumber","columnNumber","to","_c","$RefreshReg$"],"sources":["/Users/mahnach04icloud.com/Desktop/Новая папка/front-end/src/components/AuthProvider/ProtectRoute.tsx"],"sourcesContent":["import React, { JSX, useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom';\n\nconst ProtectRoute: React.FC<{ children: JSX.Element }> = ({ children }) => {\n  const [loading, setLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('authToken');\n\n    if (token) {\n      // Optionally, validate the token with the server\n      fetch('http://localhost:8081/validateToken', {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n        .then((response) => {\n          if (response.ok) {\n            setIsAuthenticated(true);\n          } else {\n            localStorage.removeItem('authToken');\n            setIsAuthenticated(false);\n          }\n        })\n        .catch(() => {\n          localStorage.removeItem('authToken');\n          setIsAuthenticated(false);\n        })\n        .finally(() => setLoading(false));\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  if (loading) {\n    return <div>Loading...</div>; // Show a loading indicator\n  }\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" />;\n  }\n\n  return children;\n};\n\nexport default ProtectRoute;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACvD,SAASC,QAAQ,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,MAAMC,YAAiD,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC1E,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACS,eAAe,EAAEC,kBAAkB,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAE7DD,SAAS,CAAC,MAAM;IACd,MAAMY,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAE/C,IAAIF,KAAK,EAAE;MACT;MACAG,KAAK,CAAC,qCAAqC,EAAE;QAC3CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACPC,aAAa,EAAE,UAAUN,KAAK;QAChC;MACF,CAAC,CAAC,CACCO,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAIA,QAAQ,CAACC,EAAE,EAAE;UACfV,kBAAkB,CAAC,IAAI,CAAC;QAC1B,CAAC,MAAM;UACLE,YAAY,CAACS,UAAU,CAAC,WAAW,CAAC;UACpCX,kBAAkB,CAAC,KAAK,CAAC;QAC3B;MACF,CAAC,CAAC,CACDY,KAAK,CAAC,MAAM;QACXV,YAAY,CAACS,UAAU,CAAC,WAAW,CAAC;QACpCX,kBAAkB,CAAC,KAAK,CAAC;MAC3B,CAAC,CAAC,CACDa,OAAO,CAAC,MAAMf,UAAU,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC,MAAM;MACLA,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,IAAID,OAAO,EAAE;IACX,oBAAOJ,OAAA;MAAAE,QAAA,EAAK;IAAU;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,CAAC,CAAC;EAChC;EAEA,IAAI,CAAClB,eAAe,EAAE;IACpB,oBAAON,OAAA,CAACF,QAAQ;MAAC2B,EAAE,EAAC;IAAQ;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACjC;EAEA,OAAOtB,QAAQ;AACjB,CAAC;AAACC,EAAA,CA1CIF,YAAiD;AAAAyB,EAAA,GAAjDzB,YAAiD;AA4CvD,eAAeA,YAAY;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}