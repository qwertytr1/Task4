{"ast":null,"code":"import React,{useCallback,useState}from'react';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{motion}from'framer-motion';import{useNavigate,useLocation}from'react-router-dom';import axios from'axios';import{useAuth}from'../AuthProvider/AuthProvider';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SignInModal(){var _location$state,_location$state2;const location=useLocation();const navigate=useNavigate();const{login}=useAuth();const[values,setValues]=useState({email:((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.email)||'',password:((_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.password)||''});const[errorMessage,setErrorMessage]=useState(null);const loginUser=useCallback(event=>{event.preventDefault();setErrorMessage(null);axios.post('http://localhost:8081/login',values).then(res=>{const{Status,token,User}=res.data;if(Status==='Success'&&token){// Сохраняем token и данные пользователя в localStorage\nlocalStorage.setItem('authToken',token);localStorage.setItem('userData',JSON.stringify(User));// сохраняем объект пользователя\nlogin(token);// Логируем пользователя\nnavigate('/home');// Переходим на страницу Home\n}else{setErrorMessage('Invalid email or password');}}).catch(err=>{console.error('Login error:',err);setErrorMessage('An error occurred. Please try again.');});},[values,navigate,login,setErrorMessage]);const handleCreateAccountClick=useCallback(()=>{navigate('/register');},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"SignInPage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"SignINBlock\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"TopPart\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"HOMECOMFORT\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"Middle\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"SignUpText\",children:\"Sign In\"}),errorMessage&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:errorMessage}),/*#__PURE__*/_jsx(Form.Control,{size:\"lg\",type:\"text\",placeholder:\"Email\",className:\"inputEmailPass\",value:values.email,onChange:e=>setValues(prev=>({...prev,email:e.target.value}))}),/*#__PURE__*/_jsx(Form.Control,{size:\"lg\",type:\"password\",placeholder:\"Password\",className:\"inputEmailPass\",value:values.password,onChange:e=>setValues(prev=>({...prev,password:e.target.value}))}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",size:\"lg\",className:\"SignInButton\",onClick:loginUser,children:\"SIGN IN\"})]})]}),/*#__PURE__*/_jsx(motion.div,{className:\"PicturePart\",initial:{backgroundPositionX:'100%'},animate:{backgroundPositionX:'0%'},exit:{backgroundPositionX:'-100%'},transition:{duration:1},children:/*#__PURE__*/_jsxs(\"div\",{className:\"TextOverlay\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Welcome to HomeComfort! Your journey to comfort starts here.\"}),/*#__PURE__*/_jsx(Button,{variant:\"light\",size:\"lg\",onClick:handleCreateAccountClick,children:\"CREATE ACCOUNT\"})]})})]});}export default SignInModal;","map":{"version":3,"names":["React","useCallback","useState","Form","Button","motion","useNavigate","useLocation","axios","useAuth","jsx","_jsx","jsxs","_jsxs","SignInModal","_location$state","_location$state2","location","navigate","login","values","setValues","email","state","password","errorMessage","setErrorMessage","loginUser","event","preventDefault","post","then","res","Status","token","User","data","localStorage","setItem","JSON","stringify","catch","err","console","error","handleCreateAccountClick","className","children","role","Control","size","type","placeholder","value","onChange","e","prev","target","variant","onClick","div","initial","backgroundPositionX","animate","exit","transition","duration"],"sources":["/Users/mahnach04icloud.com/Desktop/Новая папка 2/Task4/client/src/components/SignInModal/SignInModal.tsx"],"sourcesContent":["import React, { useCallback, useState } from 'react';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { motion } from 'framer-motion';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport { useAuth } from '../AuthProvider/AuthProvider';\n\nfunction SignInModal() {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { login } = useAuth();\n\n  const [values, setValues] = useState({\n    email: location.state?.email || '',\n    password: location.state?.password || '',\n  });\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n\n  const loginUser = useCallback(\n    (event: React.FormEvent) => {\n      event.preventDefault();\n      setErrorMessage(null);\n\n      axios\n        .post('http://localhost:8081/login', values)\n        .then((res) => {\n          const { Status, token, User } = res.data;\n          if (Status === 'Success' && token) {\n            // Сохраняем token и данные пользователя в localStorage\n            localStorage.setItem('authToken', token);\n            localStorage.setItem('userData', JSON.stringify(User)); // сохраняем объект пользователя\n\n            login(token); // Логируем пользователя\n            navigate('/home'); // Переходим на страницу Home\n          } else {\n            setErrorMessage('Invalid email or password');\n          }\n        })\n        .catch((err) => {\n          console.error('Login error:', err);\n          setErrorMessage('An error occurred. Please try again.');\n        });\n    },\n    [values, navigate, login, setErrorMessage],\n  );\n\n  const handleCreateAccountClick = useCallback(() => {\n    navigate('/register');\n  }, [navigate]);\n\n  return (\n    <div className=\"SignInPage\">\n      <div className=\"SignINBlock\">\n        <div className=\"TopPart\">\n          <h1>HOMECOMFORT</h1>\n        </div>\n        <div className=\"Middle\">\n          <h2 className=\"SignUpText\">Sign In</h2>\n\n          {/* Сообщение об ошибке */}\n          {errorMessage && (\n            <div className=\"alert alert-danger\" role=\"alert\">\n              {errorMessage}\n            </div>\n          )}\n\n          <Form.Control\n            size=\"lg\"\n            type=\"text\"\n            placeholder=\"Email\"\n            className=\"inputEmailPass\"\n            value={values.email}\n            onChange={(e) =>\n              setValues((prev) => ({ ...prev, email: e.target.value }))\n            }\n          />\n          <Form.Control\n            size=\"lg\"\n            type=\"password\"\n            placeholder=\"Password\"\n            className=\"inputEmailPass\"\n            value={values.password}\n            onChange={(e) =>\n              setValues((prev) => ({ ...prev, password: e.target.value }))\n            }\n          />\n          <Button\n            variant=\"secondary\"\n            size=\"lg\"\n            className=\"SignInButton\"\n            onClick={loginUser}\n          >\n            SIGN IN\n          </Button>\n        </div>\n      </div>\n      <motion.div\n        className=\"PicturePart\"\n        initial={{ backgroundPositionX: '100%' }}\n        animate={{ backgroundPositionX: '0%' }}\n        exit={{ backgroundPositionX: '-100%' }}\n        transition={{ duration: 1 }}\n      >\n        <div className=\"TextOverlay\">\n          <p>Welcome to HomeComfort! Your journey to comfort starts here.</p>\n          <Button variant=\"light\" size=\"lg\" onClick={handleCreateAccountClick}>\n            CREATE ACCOUNT\n          </Button>\n        </div>\n      </motion.div>\n    </div>\n  );\n}\n\nexport default SignInModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}